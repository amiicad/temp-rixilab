<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Rixi Lab Interns Dashboard</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="/img/Rixi Lab New Logo PNG.png" rel="icon">
  <link href="/img/apple-touch-icon.png" rel="apple-touch-icon"> 

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/js/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/js/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/js/vendor/aos/aos.css" rel="stylesheet">
  <link href="/js/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/js/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="/css/main.css" rel="stylesheet">

</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">

      <a href="/index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <img src="/img/Rixi Lab New Logo PNG.png" alt="">
        <h1 class="sitename">Rixi Lab</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="/index.html" class="active">Home</a></li>
          <li><a href="/#about">About</a></li>
          <li><a href="/#services">Services</a></li>
          <li><a href="/#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="logout">Logout</a>

    </div>
  </header>

  <main class="main"><br><br>
   <!-- Contact Section -->
   <section id="contact" style="padding-bottom: 10px;" class="contact section">
    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Dashboard</h2>
      <!-- <p>Necessitatibus eius consequatur ex aliquid fuga eum quidem sint consectetur velit</p> -->
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">
      <div class="row">
        <div class="col-lg-6 mb-5" data-aos="fade-right" data-aos-delay="200">
          <div class="contact-info-section">
            <div class="info-header">
              <h3>Welcome to Rixi Lab, <%= intern.name %></h3>
              <h4>Student Details</h4><hr>
              <h5>Name : <%= intern.name %></h5>
              <h5>Intern ID : <%= intern.intern_id %></h5>
              <h5>Email ID : <%= intern.email %> </h5>
              <h5>Mobile No : +91 <%= intern.phone%></h5>
              
              <hr><h4>College Details</h4><hr>
              <h5>College : <%= intern.college %></h5>
              <h5>University :<%= intern.university %></h5>
              <h5>Course : <%= intern.course %></h5>
              <h5>Branch : <%= intern.branch %></h5>
              <h5>Year/Sem : <%= intern.year_sem %></h5>
              
              <hr><h4>Internship Details</h4><hr>
              <h5>Internship Domain : <%= intern.domain %></h5>
              <h5>Internship Duration : <%= intern.duration %> Weeks</h5>
              


            </div>

            <div class="contact-info-grid">
              <div class="info-item" data-aos="zoom-in" data-aos-delay="250">
                <div class="info-icon">
                  <i class="bi bi-file-earmark-text-fill"></i>
                </div>
                <div class="info-content">
                  <h5>Internship Offer Letter</h5>
                  <p>Download your offer later from here</p>
                </div>
                <a href="<%= intern.offer_letter %>" target="_blank">
                  <div class="info-icon">
                    <i class="bi bi-download"></i>
                  </div>
                </a>
              </div>

              <div class="info-item" data-aos="zoom-in" data-aos-delay="300">
                <div class="info-icon">
                  <i class="bi bi-file-earmark-medical-fill"></i>
                </div>
                <div class="info-content">
                  <h5>Internship Certificate</h5>
                  <p>Available, When Your Progress is 100%</p>
                </div>
                <a href="<%= intern.certificate_link %>" target="_blank">
                  <div class="info-icon">
                    <i class="bi bi-download"></i>
                  </div>
                </a>
              </div>

            </div>
          </div>
        </div>

        <div class="col-lg-6" data-aos="fade-left" data-aos-delay="200">
          <div class="contact-info-section">
            <div class="info-header">
              <h3>Your Projects Timeline  <span style="color: #ff6600;"><%= progress %>%</span></h3>
              <p>You can upload and download your assigned project here!</p>
              <progress value="<%= progress %>" max="100" style="height:10px; width:100%;background-color: #00ff66;border-radius: 10px;
  overflow: hidden; margin-bottom: 8px;margin-top: 8px;"></progress>
             
             <div

            
            <!--------------------------------------------------------------------------------------- Project 1  -->


            <!-- <div class="contact-info-grid">
              <div class="info-item" data-aos="zoom-in" data-aos-delay="250">
                <a href="#" download="">
                  <div class="info-icon">
                    <i class="bi bi-download"></i>
                  </div>
                </a>
                <div class="info-content">
                  <h5>Project 1 Basic</h5>
                  <p>Week 1 project is assigned.</p>
                </div>
                <a href="#">
                  <div class="info-icon">
                    <i class="bi bi-upload"></i>
                  </div>
                </a>
              </div>


            </div> -->
           <div class="contact-info-grid">
  <% if (intern.projectAssigned && intern.projectAssigned.length > 0) { %>
    <% intern.projectAssigned.forEach(sub => { 
         // Find project details from projects array
         const proj = projects.find(p => p._id.toString() === sub.projectId.toString());
    %>
      <div class="info-item" data-aos="zoom-in" data-aos-delay="250">

        <!-- Download Icon -->
        <a href="<%= proj ? proj.downloadLink : '#' %>" download target="_blank">
          <div class="info-icon">
            <i class="bi bi-download"></i>
          </div>
        </a>

        <!-- Project Info -->
        <div class="info-content">
          <h5><%= proj ? proj.title : 'N/A' %></h5>
          <small>
    <%= proj ? proj.description : '' %>  
    <% if (sub.status === 'accepted') { %>
      <span style="color: #00ff66;  margin-left: 8px;"> (<%= sub.status.toUpperCase() %>)</span>
    <% } else if (sub.status === 'rejected') { %>
      <span style="color: #ff3300;  margin-left: 8px;"> (<%= sub.status.toUpperCase() %>)</span>
    <% } %>
    <!-- nothing is rendered if status is pending -->
  </small>
        </div>

        <!-- Upload / Status -->
        <% if (sub.status === 'accepted') { %>
          <!-- Green Check when Accepted -->
          <div class="info-icon text-success">
            <i class="bi bi-check-circle-fill" style="color:#00ff66;"></i>
          </div>
        <% } else { %>
          <!-- Upload button if not accepted -->
          <a href="<%= proj ? proj.uploadLink : '#' %>" target="_blank">
            <div class="info-icon">
              <i class="bi bi-upload"></i>
            </div>
          </a>
        <% } %>

      </div>
    <% }) %>
  <% } else { %>
    <p>No projects assigned yet.</p>
  <% } %>
</div>

<% if (progress === 100) { %>
  <div class="contact-info-grid mt-3" data-aos="zoom-in" data-aos-delay="250">
    <div class="info-item">

      <!-- Link to Google Form -->
      
        <div class="info-icon">
         <i class="bi bi-chat-quote-fill"></i>
        </div>
     

      <div class="info-content">
        <h5>Internship Feedback</h5>
        <p>Internship Feedback & Profile Submission - Rixi Lab</p>
      </div>
      <a href="https://forms.gle/EVts4YfhRZCnp6aj8" target="_blank">
      <div class="info-icon">
        <i class="bi bi-arrow-right-circle"></i>
      </div>
       </a>
    </div>
  </div>
<% } %>



          </div>
        </div>
      </div>
    </div>
  </section><!-- /Contact Section -->

  </main>

  <%- include('partials/footer') %>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="/js/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/js/vendor/aos/aos.js"></script>
  <script src="/js/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/js/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/js/vendor/typed.js/typed.umd.js"></script>
  <script src="/js/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="/js/main.js"></script>

</body>

</html>